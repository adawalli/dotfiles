packages:
  darwin:
    brews:
      - coreutils
      - fish
      - starship
      - atuin
      - carapace
      - ripgrep
      - fd
      - fzf
      - bat
      - jq
      - just
      - nvim
      - zoxide
      - vivid
      - tree
      - k9s
      - eza
      - yazi
      - lazygit
      - git-delta
      - bottom
      - jless
      - mdcat
    casks:
      - ghostty
      - claude-code

  linux:
    apt:
      - git
      - curl
      - ca-certificates
      - fish
      - ripgrep
      - jq
      - bat
      - carapace-bin
      - fd-find
      - tree
      - eza

    apt_repos:
      - name: carapace
        check: /etc/apt/sources.list.d/fury.list
        repo: 'deb [trusted=yes] https://apt.fury.io/rsteube/ /'
        file: /etc/apt/sources.list.d/fury.list

      - name: eza
        check: /etc/apt/sources.list.d/gierens.list
        setup_script: |
          sudo mkdir -p /etc/apt/keyrings
          wget -qO- https://raw.githubusercontent.com/eza-community/eza/main/deb.asc | sudo gpg --dearmor -o /etc/apt/keyrings/gierens.gpg
          echo "deb [signed-by=/etc/apt/keyrings/gierens.gpg] http://deb.gierens.de stable main" | sudo tee /etc/apt/sources.list.d/gierens.list
          sudo chmod 644 /etc/apt/keyrings/gierens.gpg /etc/apt/sources.list.d/gierens.list

    binaries:
      - name: starship
        check: starship
        install_script: curl -sS https://starship.rs/install.sh | sh -s -- -y

      - name: atuin
        check: atuin
        install_script: curl --proto '=https' --tlsv1.2 -LsSf https://setup.atuin.sh | sh -s -- --no-modify-path

      - name: zoxide
        check: zoxide
        install_script: curl -sSfL https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh | sh

      - name: neovim
        check: nvim
        arch_map:
          amd64: x86_64
          arm64: arm64
        url_template: "https://github.com/neovim/neovim/releases/latest/download/nvim-linux-${ARCH}.tar.gz"
        install_script: |
          curl -L "${URL}" -o /tmp/nvim.tar.gz
          tar -xzf /tmp/nvim.tar.gz -C /tmp
          mkdir -p "$HOME/.local"
          cp -r /tmp/nvim-linux-${ARCH}/* "$HOME/.local/"
          rm -rf /tmp/nvim.tar.gz /tmp/nvim-linux-${ARCH}

      - name: vivid
        check: vivid
        version: "0.10.1"
        arch_map:
          amd64: amd64
          arm64: arm64
        url_template: "https://github.com/sharkdp/vivid/releases/download/v${VERSION}/vivid_${VERSION}_${ARCH}.deb"
        install_script: |
          curl -L "${URL}" -o /tmp/vivid.deb
          sudo dpkg -i /tmp/vivid.deb
          rm /tmp/vivid.deb

      - name: fzf
        check: fzf
        version: "0.65.2"
        arch_map:
          amd64: amd64
          arm64: arm64
        url_template: "https://github.com/junegunn/fzf/releases/download/v${VERSION}/fzf-${VERSION}-linux_${ARCH}.tar.gz"
        install_script: |
          curl -L "${URL}" -o /tmp/fzf.tar.gz
          tar -xzf /tmp/fzf.tar.gz -C /tmp
          mkdir -p "$HOME/.local/bin"
          mv /tmp/fzf "$HOME/.local/bin/fzf"
          rm /tmp/fzf.tar.gz

      - name: yazi
        check: yazi
        version: "0.4.2"
        arch_map:
          amd64: x86_64
          arm64: aarch64
        url_template: "https://github.com/sxyazi/yazi/releases/download/v${VERSION}/yazi-${ARCH}-unknown-linux-gnu.zip"
        install_script: |
          curl -L "${URL}" -o /tmp/yazi.zip
          unzip -o /tmp/yazi.zip -d /tmp
          mkdir -p "$HOME/.local/bin"
          mv /tmp/yazi-${ARCH}-unknown-linux-gnu/yazi "$HOME/.local/bin/yazi"
          mv /tmp/yazi-${ARCH}-unknown-linux-gnu/ya "$HOME/.local/bin/ya"
          rm -rf /tmp/yazi.zip /tmp/yazi-${ARCH}-unknown-linux-gnu

      - name: lazygit
        check: lazygit
        version: "0.44.1"
        arch_map:
          amd64: x86_64
          arm64: arm64
        url_template: "https://github.com/jesseduffield/lazygit/releases/download/v${VERSION}/lazygit_${VERSION}_Linux_${ARCH}.tar.gz"
        install_script: |
          curl -L "${URL}" -o /tmp/lazygit.tar.gz
          tar -xzf /tmp/lazygit.tar.gz -C /tmp
          mkdir -p "$HOME/.local/bin"
          mv /tmp/lazygit "$HOME/.local/bin/lazygit"
          rm /tmp/lazygit.tar.gz

      - name: delta
        check: delta
        version: "0.18.2"
        arch_map:
          amd64: x86_64
          arm64: aarch64
        url_template: "https://github.com/dandavison/delta/releases/download/${VERSION}/delta-${VERSION}-${ARCH}-unknown-linux-gnu.tar.gz"
        install_script: |
          curl -L "${URL}" -o /tmp/delta.tar.gz
          tar -xzf /tmp/delta.tar.gz -C /tmp
          mkdir -p "$HOME/.local/bin"
          mv /tmp/delta-${VERSION}-${ARCH}-unknown-linux-gnu/delta "$HOME/.local/bin/delta"
          rm -rf /tmp/delta.tar.gz /tmp/delta-${VERSION}-${ARCH}-unknown-linux-gnu

      - name: bottom
        check: btm
        version: "0.10.2"
        arch_map:
          amd64: x86_64
          arm64: aarch64
        url_template: "https://github.com/ClementTsang/bottom/releases/download/${VERSION}/bottom_${ARCH}-unknown-linux-gnu.tar.gz"
        install_script: |
          curl -L "${URL}" -o /tmp/bottom.tar.gz
          tar -xzf /tmp/bottom.tar.gz -C /tmp
          mkdir -p "$HOME/.local/bin"
          mv /tmp/btm "$HOME/.local/bin/btm"
          rm /tmp/bottom.tar.gz

      - name: jless
        check: jless
        version: "0.9.0"
        arch_map:
          amd64: x86_64
          arm64: aarch64
        url_template: "https://github.com/PaulJuliusMartinez/jless/releases/download/v${VERSION}/jless-v${VERSION}-${ARCH}-unknown-linux-gnu.zip"
        install_script: |
          curl -L "${URL}" -o /tmp/jless.zip
          unzip -o /tmp/jless.zip -d /tmp
          mkdir -p "$HOME/.local/bin"
          mv /tmp/jless "$HOME/.local/bin/jless"
          rm /tmp/jless.zip

      - name: mdcat
        check: mdcat
        version: "2.5.0"
        arch_map:
          amd64: x86_64
          arm64: aarch64
        url_template: "https://github.com/swsnr/mdcat/releases/download/mdcat-${VERSION}/mdcat-${VERSION}-${ARCH}-unknown-linux-musl.tar.gz"
        install_script: |
          curl -L "${URL}" -o /tmp/mdcat.tar.gz
          tar -xzf /tmp/mdcat.tar.gz -C /tmp
          mkdir -p "$HOME/.local/bin"
          mv /tmp/mdcat-${VERSION}-${ARCH}-unknown-linux-musl/mdcat "$HOME/.local/bin/mdcat"
          rm -rf /tmp/mdcat.tar.gz /tmp/mdcat-${VERSION}-${ARCH}-unknown-linux-musl
