set -gx XDG_CONFIG_HOME $HOME/.config
set -gx K9S_CONFIG_DIR $XDG_CONFIG_HOME/k9s

if command -q go; fish_add_path (go env GOPATH)/bin; end
fish_add_path $HOME/.local/bin
if test -d $HOME/bin; fish_add_path $HOME/bin; end

set -gx EDITOR nvim
set -gx AWS_PAGER ""

set -U fish_greeting ""

if status is-interactive
    # Enable vim key bindings
    fish_vi_key_bindings

    {{- if eq .chezmoi.os "darwin" }}
    # Homebrew should come first for precedence
    /opt/homebrew/bin/brew shellenv | source
    abbr -a icd 'cd ~/Library/Mobile\ Documents/com\~apple\~CloudDocs'
    abbr --add typora open -a typora
    {{- end }}
    # Commands to run in interactive sessions can go here
    {{- if eq .chezmoi.os "linux" }}
    fish_add_path $HOME/.atuin/bin
    {{- end }}
    source (starship init fish --print-full-init | psub)
    #zsh was removed from carapace bridges because of bug https://github.com/carapace-sh/carapace-bin/issues/2998
    set -Ux CARAPACE_BRIDGES 'fish,bash,inshellisense' # optional
    if command -q carapace; carapace _carapace | source; end
    set -Ux CARAPACE_EXCLUDES kubectl # I was having issues with kubectl through carapace
    if command -v atuin >/dev/null 2>&1
        atuin init fish | source
    end
    set -gx VISUAL "cursor --wait"
    if command -q pyenv; source (pyenv init - | psub); end
    if command -q zoxide; zoxide init fish | source; end
    if command -q vivid; set -gx LS_COLORS (vivid generate catppuccin-mocha); end
end
